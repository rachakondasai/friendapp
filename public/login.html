<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login ‚Äî FriendApp</title>
  <link rel="stylesheet" href="/ui.css"/>
</head>
<body class="wrap">
  <div class="card">
    <h2>üîê Login</h2>
    <div class="grid">
      <input id="phone" placeholder="Phone"/>
      <input id="password" type="password" placeholder="Password"/>
      <button id="go" class="btn">Login</button>
    </div>
    <p id="msg"></p>
    <p class="muted">No account? <a href="/signup.html">Create one</a></p>
  </div>
  <script type="module">
    const $ = (id)=>document.getElementById(id);
    const api = async (p,b)=>{
      const r = await fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b||{})});
      if(!r.ok) throw new Error((await r.json()).error||"Request failed"); return r.json();
    };
    $("go").onclick = async ()=>{
      $("msg").textContent="";
      try{
        const r = await api("/api/login",{phone:$("phone").value, password:$("password").value});
        localStorage.setItem("fa_token", r.token);
        location.href="/dashboard.html";
      }catch(e){ $("msg").textContent = e.message; }
    };
  </script>
</body>
</html>
