<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>FriendApp â€” Sign Up</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/ui.css">
</head>
<body class="bg">
  <main class="card w-3xl">
    <header class="card-h"><h1>ðŸ‘‹ Create account</h1><a href="/login.html" class="link">Login</a></header>
    <section class="grid2">
      <input id="name" placeholder="Name" class="in">
      <input id="phone" placeholder="Phone" class="in">
      <input id="password" placeholder="Password" type="password" class="in col2">
      <button id="btn_signup" class="btn btn-blue col2">Sign up</button>
      <div id="status" class="err col2"></div>
    </section>
  </main>
  <script>
    const $=id=>document.getElementById(id);
    const api=async(p,b)=>{const r=await fetch(p,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(b)});if(!r.ok)throw new Error((await r.json()).error||'Failed');return r.json();};
    $('btn_signup').onclick=async()=>{
      $('status').textContent='';
      try{
        await api('/api/signup',{name:$('name').value.trim(), phone:$('phone').value.trim(), password:$('password').value});
        location.href='/login.html';
      }catch(e){$('status').textContent=e.message;}
    };
  </script>
</body>
</html>
