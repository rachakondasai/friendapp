<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Sign up â€” FriendApp</title>
  <link rel="stylesheet" href="/ui.css"/>
</head>
<body class="wrap">
  <div class="card">
    <h2>ğŸ“ Create account</h2>
    <div class="grid">
      <input id="name"  placeholder="Name"/>
      <input id="phone" placeholder="Phone"/>
      <input id="password" type="password" placeholder="Password"/>
      <button id="go" class="btn">Sign up</button>
    </div>
    <p id="msg"></p>
    <p class="muted">Already have an account? <a href="/login.html">Log in</a></p>
  </div>
  <script type="module">
    const $ = (id)=>document.getElementById(id);
    const api = async (p,b)=>{
      const r = await fetch(p,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b||{})});
      if(!r.ok) throw new Error((await r.json()).error||"Request failed"); return r.json();
    };
    $("go").onclick = async ()=>{
      $("msg").textContent = "";
      try{
        await api("/api/signup",{name:$("name").value, phone:$("phone").value, password:$("password").value});
        location.href="/login.html";
      }catch(e){ $("msg").textContent = e.message; }
    };
  </script>
</body>
</html>
